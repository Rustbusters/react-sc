(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=r(i);fetch(i.href,a)}})();const ai=!1;var Nr=Array.isArray,Ur=Array.from,oi=Object.defineProperty,Be=Object.getOwnPropertyDescriptor,hn=Object.getOwnPropertyDescriptors,si=Object.prototype,li=Array.prototype,jr=Object.getPrototypeOf;function St(e){return typeof e=="function"}const ft=()=>{};function ui(e){return e()}function kr(e){for(var t=0;t<e.length;t++)e[t]()}const he=2,_n=4,Bt=8,Lr=16,_e=32,pt=64,Er=128,Ze=256,Xt=512,ae=1024,Me=2048,Ft=4096,ke=8192,bt=16384,ci=32768,nr=65536,di=1<<17,fi=1<<19,mn=1<<20,Fe=Symbol("$state"),pn=Symbol("legacy props"),Ir=Symbol("");function bn(e){return e===this.v}function yn(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function Br(e){return!yn(e,this.v)}function vi(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function gi(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function hi(e){throw new Error("https://svelte.dev/e/effect_orphan")}function _i(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function mi(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function pi(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function bi(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function yi(){throw new Error("https://svelte.dev/e/state_unsafe_local_read")}function xi(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let yt=!1;function wi(){yt=!0}const Fr=1,zr=2,xn=4,ki=8,Ei=16,Ii=1,Ti=2,wn=4,Si=8,Pi=16,Ci=1,Ri=2,te=Symbol(),kn="http://www.w3.org/2000/svg";function re(e,t){var r={f:0,v:e,reactions:null,equals:bn,version:0};return r}function K(e){return Ai(re(e))}function Mr(e,t=!1){var n;const r=re(e);return t||(r.equals=Br),yt&&F!==null&&F.l!==null&&((n=F.l).s??(n.s=[])).push(r),r}function Ai(e){return B!==null&&B.f&he&&(Ie===null?Wi([e]):Ie.push(e)),e}function w(e,t){return B!==null&&lr()&&B.f&(he|Lr)&&(Ie===null||!Ie.includes(e))&&xi(),Tr(e,t)}function Tr(e,t){return e.equals(t)||(e.v=t,e.version=Mn(),En(e,Me),lr()&&N!==null&&N.f&ae&&!(N.f&_e)&&(Q!==null&&Q.includes(e)?(Pe(N,Me),dr(N)):ze===null?qi([e]):ze.push(e))),t}function En(e,t){var r=e.reactions;if(r!==null)for(var n=lr(),i=r.length,a=0;a<i;a++){var o=r[a],s=o.f;s&Me||!n&&o===N||(Pe(o,t),s&(ae|Ze)&&(s&he?En(o,Ft):dr(o)))}}let In=!1;function H(e,t=null,r){if(typeof e!="object"||e===null||Fe in e)return e;const n=jr(e);if(n!==si&&n!==li)return e;var i=new Map,a=Nr(e),o=re(0);a&&i.set("length",re(e.length));var s;return new Proxy(e,{defineProperty(u,l,c){(!("value"in c)||c.configurable===!1||c.enumerable===!1||c.writable===!1)&&pi();var d=i.get(l);return d===void 0?(d=re(c.value),i.set(l,d)):w(d,H(c.value,s)),!0},deleteProperty(u,l){var c=i.get(l);if(c===void 0)l in u&&i.set(l,re(te));else{if(a&&typeof l=="string"){var d=i.get("length"),v=Number(l);Number.isInteger(v)&&v<d.v&&w(d,v)}w(c,te),Xr(o)}return!0},get(u,l,c){var f;if(l===Fe)return e;var d=i.get(l),v=l in u;if(d===void 0&&(!v||(f=Be(u,l))!=null&&f.writable)&&(d=re(H(v?u[l]:te,s)),i.set(l,d)),d!==void 0){var g=h(d);return g===te?void 0:g}return Reflect.get(u,l,c)},getOwnPropertyDescriptor(u,l){var c=Reflect.getOwnPropertyDescriptor(u,l);if(c&&"value"in c){var d=i.get(l);d&&(c.value=h(d))}else if(c===void 0){var v=i.get(l),g=v==null?void 0:v.v;if(v!==void 0&&g!==te)return{enumerable:!0,configurable:!0,value:g,writable:!0}}return c},has(u,l){var g;if(l===Fe)return!0;var c=i.get(l),d=c!==void 0&&c.v!==te||Reflect.has(u,l);if(c!==void 0||N!==null&&(!d||(g=Be(u,l))!=null&&g.writable)){c===void 0&&(c=re(d?H(u[l],s):te),i.set(l,c));var v=h(c);if(v===te)return!1}return d},set(u,l,c,d){var y;var v=i.get(l),g=l in u;if(a&&l==="length")for(var f=c;f<v.v;f+=1){var _=i.get(f+"");_!==void 0?w(_,te):f in u&&(_=re(te),i.set(f+"",_))}v===void 0?(!g||(y=Be(u,l))!=null&&y.writable)&&(v=re(void 0),w(v,H(c,s)),i.set(l,v)):(g=v.v!==te,w(v,H(c,s)));var k=Reflect.getOwnPropertyDescriptor(u,l);if(k!=null&&k.set&&k.set.call(d,c),!g){if(a&&typeof l=="string"){var T=i.get("length"),m=Number(l);Number.isInteger(m)&&m>=T.v&&w(T,m+1)}Xr(o)}return!0},ownKeys(u){h(o);var l=Reflect.ownKeys(u).filter(v=>{var g=i.get(v);return g===void 0||g.v!==te});for(var[c,d]of i)d.v!==te&&!(c in u)&&l.push(c);return l},setPrototypeOf(){bi()}})}function Xr(e,t=1){w(e,e.v+t)}var Jr,Tn,Sn;function Oi(){if(Jr===void 0){Jr=window;var e=Element.prototype,t=Node.prototype;Tn=Be(t,"firstChild").get,Sn=Be(t,"nextSibling").get,e.__click=void 0,e.__className="",e.__attributes=null,e.__styles=null,e.__e=void 0,Text.prototype.__t=void 0}}function ir(e=""){return document.createTextNode(e)}function gt(e){return Tn.call(e)}function ar(e){return Sn.call(e)}function b(e,t){return gt(e)}function G(e,t){{var r=gt(e);return r instanceof Comment&&r.data===""?ar(r):r}}function R(e,t=1,r=!1){let n=e;for(;t--;)n=ar(n);return n}function Di(e){e.textContent=""}function Ae(e){var t=he|Me;N===null?t|=Ze:N.f|=mn;var r=B!==null&&B.f&he?B:null;const n={children:null,ctx:F,deps:null,equals:bn,f:t,fn:e,reactions:null,v:null,version:0,parent:r??N};return r!==null&&(r.children??(r.children=[])).push(n),n}function Ni(e){const t=Ae(e);return t.equals=Br,t}function Pn(e){var t=e.children;if(t!==null){e.children=null;for(var r=0;r<t.length;r+=1){var n=t[r];n.f&he?Wr(n):Te(n)}}}function Ui(e){for(var t=e.parent;t!==null;){if(!(t.f&he))return t;t=t.parent}return null}function Cn(e){var t,r=N;Se(Ui(e));try{Pn(e),t=Wn(e)}finally{Se(r)}return t}function Rn(e){var t=Cn(e),r=(Xe||e.f&Ze)&&e.deps!==null?Ft:ae;Pe(e,r),e.equals(t)||(e.v=t,e.version=Mn())}function Wr(e){Pn(e),Ut(e,0),Pe(e,bt),e.v=e.children=e.deps=e.ctx=e.reactions=null}function An(e){N===null&&B===null&&hi(),B!==null&&B.f&Ze&&gi(),Kr&&vi()}function ji(e,t){var r=t.last;r===null?t.last=t.first=e:(r.next=e,e.prev=r,t.last=e)}function Qe(e,t,r,n=!0){var i=(e&pt)!==0,a=N,o={ctx:F,deps:null,deriveds:null,nodes_start:null,nodes_end:null,f:e|Me,first:null,fn:t,last:null,next:null,parent:i?null:a,prev:null,teardown:null,transitions:null,version:0};if(r){var s=vt;try{Zr(!0),cr(o),o.f|=ci}catch(c){throw Te(o),c}finally{Zr(s)}}else t!==null&&dr(o);var u=r&&o.deps===null&&o.first===null&&o.nodes_start===null&&o.teardown===null&&(o.f&mn)===0;if(!u&&!i&&n&&(a!==null&&ji(o,a),B!==null&&B.f&he)){var l=B;(l.children??(l.children=[])).push(o)}return o}function On(e){const t=Qe(Bt,null,!1);return Pe(t,ae),t.teardown=e,t}function Ee(e){An();var t=N!==null&&(N.f&_e)!==0&&F!==null&&!F.m;if(t){var r=F;(r.e??(r.e=[])).push({fn:e,effect:N,reaction:B})}else{var n=qr(e);return n}}function Li(e){return An(),Hr(e)}function Bi(e){const t=Qe(pt,e,!0);return()=>{Te(t)}}function Fi(e){const t=Qe(pt,e,!0);return(r={})=>new Promise(n=>{r.outro?Dt(t,()=>{Te(t),n(void 0)}):(Te(t),n(void 0))})}function qr(e){return Qe(_n,e,!1)}function Hr(e){return Qe(Bt,e,!0)}function $(e){return or(e)}function or(e,t=0){return Qe(Bt|Lr|t,e,!0)}function ht(e,t=!0){return Qe(Bt|_e,e,!0,t)}function Dn(e){var t=e.teardown;if(t!==null){const r=Kr,n=B;Qr(!0),We(null);try{t.call(null)}finally{Qr(r),We(n)}}}function Nn(e){var t=e.deriveds;if(t!==null){e.deriveds=null;for(var r=0;r<t.length;r+=1)Wr(t[r])}}function Un(e,t=!1){var r=e.first;for(e.first=e.last=null;r!==null;){var n=r.next;Te(r,t),r=n}}function zi(e){for(var t=e.first;t!==null;){var r=t.next;t.f&_e||Te(t),t=r}}function Te(e,t=!0){var r=!1;if((t||e.f&fi)&&e.nodes_start!==null){for(var n=e.nodes_start,i=e.nodes_end;n!==null;){var a=n===i?null:ar(n);n.remove(),n=a}r=!0}Un(e,t&&!r),Nn(e),Ut(e,0),Pe(e,bt);var o=e.transitions;if(o!==null)for(const u of o)u.stop();Dn(e);var s=e.parent;s!==null&&s.first!==null&&jn(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=null}function jn(e){var t=e.parent,r=e.prev,n=e.next;r!==null&&(r.next=n),n!==null&&(n.prev=r),t!==null&&(t.first===e&&(t.first=n),t.last===e&&(t.last=r))}function Dt(e,t){var r=[];Vr(e,r,!0),Ln(r,()=>{Te(e),t&&t()})}function Ln(e,t){var r=e.length;if(r>0){var n=()=>--r||t();for(var i of e)i.out(n)}else t()}function Vr(e,t,r){if(!(e.f&ke)){if(e.f^=ke,e.transitions!==null)for(const o of e.transitions)(o.is_global||r)&&t.push(o);for(var n=e.first;n!==null;){var i=n.next,a=(n.f&nr)!==0||(n.f&_e)!==0;Vr(n,t,a?r:!1),n=i}}}function Nt(e){Bn(e,!0)}function Bn(e,t){if(e.f&ke){zt(e)&&cr(e),e.f^=ke;for(var r=e.first;r!==null;){var n=r.next,i=(r.f&nr)!==0||(r.f&_e)!==0;Bn(r,i?t:!1),r=n}if(e.transitions!==null)for(const a of e.transitions)(a.is_global||t)&&a.in()}}let Sr=!1,Pr=[];function Mi(){Sr=!1;const e=Pr.slice();Pr=[],kr(e)}function sr(e){Sr||(Sr=!0,queueMicrotask(Mi)),Pr.push(e)}function Fn(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let Yt=!1,Jt=!1,Zt=null,vt=!1,Kr=!1;function Zr(e){vt=e}function Qr(e){Kr=e}let Cr=[],Rt=0;let B=null;function We(e){B=e}let N=null;function Se(e){N=e}let Ie=null;function Wi(e){Ie=e}let Q=null,le=0,ze=null;function qi(e){ze=e}let zn=1,Xe=!1,F=null;function Mn(){return++zn}function lr(){return!yt||F!==null&&F.l===null}function zt(e){var o,s;var t=e.f;if(t&Me)return!0;if(t&Ft){var r=e.deps,n=(t&Ze)!==0;if(r!==null){var i;if(t&Xt){for(i=0;i<r.length;i++)((o=r[i]).reactions??(o.reactions=[])).push(e);e.f^=Xt}for(i=0;i<r.length;i++){var a=r[i];if(zt(a)&&Rn(a),n&&N!==null&&!Xe&&!((s=a==null?void 0:a.reactions)!=null&&s.includes(e))&&(a.reactions??(a.reactions=[])).push(e),a.version>e.version)return!0}}(!n||N!==null&&!Xe)&&Pe(e,ae)}return!1}function Hi(e,t){for(var r=t;r!==null;){if(r.f&Er)try{r.fn(e);return}catch{r.f^=Er}r=r.parent}throw Yt=!1,e}function Vi(e){return(e.f&bt)===0&&(e.parent===null||(e.parent.f&Er)===0)}function ur(e,t,r,n){if(Yt){if(r===null&&(Yt=!1),Vi(t))throw e;return}r!==null&&(Yt=!0);{Hi(e,t);return}}function Wn(e){var v;var t=Q,r=le,n=ze,i=B,a=Xe,o=Ie,s=F,u=e.f;Q=null,le=0,ze=null,B=u&(_e|pt)?null:e,Xe=!vt&&(u&Ze)!==0,Ie=null,F=e.ctx;try{var l=(0,e.fn)(),c=e.deps;if(Q!==null){var d;if(Ut(e,le),c!==null&&le>0)for(c.length=le+Q.length,d=0;d<Q.length;d++)c[le+d]=Q[d];else e.deps=c=Q;if(!Xe)for(d=le;d<c.length;d++)((v=c[d]).reactions??(v.reactions=[])).push(e)}else c!==null&&le<c.length&&(Ut(e,le),c.length=le);return l}finally{Q=t,le=r,ze=n,B=i,Xe=a,Ie=o,F=s}}function Ki(e,t){let r=t.reactions;if(r!==null){var n=r.indexOf(e);if(n!==-1){var i=r.length-1;i===0?r=t.reactions=null:(r[n]=r[i],r.pop())}}r===null&&t.f&he&&(Q===null||!Q.includes(t))&&(Pe(t,Ft),t.f&(Ze|Xt)||(t.f^=Xt),Ut(t,0))}function Ut(e,t){var r=e.deps;if(r!==null)for(var n=t;n<r.length;n++)Ki(e,r[n])}function cr(e){var t=e.f;if(!(t&bt)){Pe(e,ae);var r=N,n=F;N=e;try{t&Lr?zi(e):Un(e),Nn(e),Dn(e);var i=Wn(e);e.teardown=typeof i=="function"?i:null,e.version=zn}catch(a){ur(a,e,r,n||e.ctx)}finally{N=r}}}function $i(){if(Rt>1e3){Rt=0;try{_i()}catch(e){if(Zt!==null)ur(e,Zt,null);else throw e}}Rt++}function Yi(e){var t=e.length;if(t!==0){$i();var r=vt;vt=!0;try{for(var n=0;n<t;n++){var i=e[n];i.f&ae||(i.f^=ae);var a=[];qn(i,a),Gi(a)}}finally{vt=r}}}function Gi(e){var t=e.length;if(t!==0)for(var r=0;r<t;r++){var n=e[r];if(!(n.f&(bt|ke)))try{zt(n)&&(cr(n),n.deps===null&&n.first===null&&n.nodes_start===null&&(n.teardown===null?jn(n):n.fn=null))}catch(i){ur(i,n,null,n.ctx)}}}function Xi(){if(Jt=!1,Rt>1001)return;const e=Cr;Cr=[],Yi(e),Jt||(Rt=0,Zt=null)}function dr(e){Jt||(Jt=!0,queueMicrotask(Xi)),Zt=e;for(var t=e;t.parent!==null;){t=t.parent;var r=t.f;if(r&(pt|_e)){if(!(r&ae))return;t.f^=ae}}Cr.push(t)}function qn(e,t){var r=e.first,n=[];e:for(;r!==null;){var i=r.f,a=(i&_e)!==0,o=a&&(i&ae)!==0,s=r.next;if(!o&&!(i&ke))if(i&Bt){if(a)r.f^=ae;else try{zt(r)&&cr(r)}catch(d){ur(d,r,null,r.ctx)}var u=r.first;if(u!==null){r=u;continue}}else i&_n&&n.push(r);if(s===null){let d=r.parent;for(;d!==null;){if(e===d)break e;var l=d.next;if(l!==null){r=l;continue e}d=d.parent}}r=s}for(var c=0;c<n.length;c++)u=n[c],t.push(u),qn(u,t)}function h(e){var c;var t=e.f,r=(t&he)!==0;if(r&&t&bt){var n=Cn(e);return Wr(e),n}if(B!==null){Ie!==null&&Ie.includes(e)&&yi();var i=B.deps;Q===null&&i!==null&&i[le]===e?le++:Q===null?Q=[e]:Q.push(e),ze!==null&&N!==null&&N.f&ae&&!(N.f&_e)&&ze.includes(e)&&(Pe(N,Me),dr(N))}else if(r&&e.deps===null)for(var a=e,o=a.parent,s=a;o!==null;)if(o.f&he){var u=o;s=u,o=u.parent}else{var l=o;(c=l.deriveds)!=null&&c.includes(s)||(l.deriveds??(l.deriveds=[])).push(s);break}return r&&(a=e,zt(a)&&Rn(a)),e.v}function qe(e){const t=B;try{return B=null,e()}finally{B=t}}const Ji=~(Me|Ft|ae);function Pe(e,t){e.f=e.f&Ji|t}function lt(e,t=1){var r=h(e),n=t===1?r++:r--;return w(e,r),n}function me(e,t=!1,r){F={p:F,c:null,e:null,m:!1,s:e,x:null,l:null},yt&&!t&&(F.l={s:null,u:null,r1:[],r2:re(!1)})}function pe(e){const t=F;if(t!==null){const o=t.e;if(o!==null){var r=N,n=B;t.e=null;try{for(var i=0;i<o.length;i++){var a=o[i];Se(a.effect),We(a.reaction),qr(a.fn)}}finally{Se(r),We(n)}}F=t.p,t.m=!0}return{}}function Zi(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(Fe in e)Rr(e);else if(!Array.isArray(e))for(let t in e){const r=e[t];typeof r=="object"&&r&&Fe in r&&Rr(r)}}}function Rr(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let n in e)try{Rr(e[n],t)}catch{}const r=jr(e);if(r!==Object.prototype&&r!==Array.prototype&&r!==Map.prototype&&r!==Set.prototype&&r!==Date.prototype){const n=hn(r);for(let i in n){const a=n[i].get;if(a)try{a.call(e)}catch{}}}}}function Qi(e){return e.endsWith("capture")&&e!=="gotpointercapture"&&e!=="lostpointercapture"}const ea=["beforeinput","click","change","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"];function ta(e){return ea.includes(e)}const ra={formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly",defaultvalue:"defaultValue",defaultchecked:"defaultChecked",srcobject:"srcObject"};function na(e){return e=e.toLowerCase(),ra[e]??e}const ia=["touchstart","touchmove"];function aa(e){return ia.includes(e)}function oa(e,t){if(t){const r=document.body;e.autofocus=!0,sr(()=>{document.activeElement===r&&e.focus()})}}let en=!1;function sa(){en||(en=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var t;if(!e.defaultPrevented)for(const r of e.target.elements)(t=r.__on_r)==null||t.call(r)})},{capture:!0}))}function Hn(e){var t=B,r=N;We(null),Se(null);try{return e()}finally{We(t),Se(r)}}function la(e,t,r,n=r){e.addEventListener(t,()=>Hn(r));const i=e.__on_r;i?e.__on_r=()=>{i(),n(!0)}:e.__on_r=()=>n(!0),sa()}const Vn=new Set,Ar=new Set;function Kn(e,t,r,n){function i(a){if(n.capture||Ct.call(t,a),!a.cancelBubble)return Hn(()=>r.call(this,a))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?sr(()=>{t.addEventListener(e,i,n)}):t.addEventListener(e,i,n),i}function st(e,t,r,n,i){var a={capture:n,passive:i},o=Kn(e,t,r,a);(t===document.body||t===window||t===document)&&On(()=>{t.removeEventListener(e,o,a)})}function Ce(e){for(var t=0;t<e.length;t++)Vn.add(e[t]);for(var r of Ar)r(e)}function Ct(e){var m;var t=this,r=t.ownerDocument,n=e.type,i=((m=e.composedPath)==null?void 0:m.call(e))||[],a=i[0]||e.target,o=0,s=e.__root;if(s){var u=i.indexOf(s);if(u!==-1&&(t===document||t===window)){e.__root=t;return}var l=i.indexOf(t);if(l===-1)return;u<=l&&(o=u)}if(a=i[o]||e.target,a!==t){oi(e,"currentTarget",{configurable:!0,get(){return a||r}});var c=B,d=N;We(null),Se(null);try{for(var v,g=[];a!==null;){var f=a.assignedSlot||a.parentNode||a.host||null;try{var _=a["__"+n];if(_!==void 0&&!a.disabled)if(Nr(_)){var[k,...T]=_;k.apply(a,[e,...T])}else _.call(a,e)}catch(y){v?g.push(y):v=y}if(e.cancelBubble||f===t||f===null)break;a=f}if(v){for(let y of g)queueMicrotask(()=>{throw y});throw v}}finally{e.__root=t,delete e.currentTarget,We(c),Se(d)}}}function $n(e){var t=document.createElement("template");return t.innerHTML=e,t.content}function jt(e,t){var r=N;r.nodes_start===null&&(r.nodes_start=e,r.nodes_end=t)}function U(e,t){var r=(t&Ci)!==0,n=(t&Ri)!==0,i,a=!e.startsWith("<!>");return()=>{i===void 0&&(i=$n(a?e:"<!>"+e),r||(i=gt(i)));var o=n?document.importNode(i,!0):i.cloneNode(!0);if(r){var s=gt(o),u=o.lastChild;jt(s,u)}else jt(o,o);return o}}function ua(e,t,r="svg"){var n=!e.startsWith("<!>"),i=`<${r}>${n?e:"<!>"+e}</${r}>`,a;return()=>{if(!a){var o=$n(i),s=gt(o);a=gt(s)}var u=a.cloneNode(!0);return jt(u,u),u}}function oe(){var e=document.createDocumentFragment(),t=document.createComment(""),r=ir();return e.append(t,r),jt(t,r),e}function O(e,t){e!==null&&e.before(t)}function ie(e,t){var r=t==null?"":typeof t=="object"?t+"":t;r!==(e.__t??(e.__t=e.nodeValue))&&(e.__t=r,e.nodeValue=r==null?"":r+"")}function ca(e,t){return da(e,t)}const at=new Map;function da(e,{target:t,anchor:r,props:n={},events:i,context:a,intro:o=!0}){Oi();var s=new Set,u=d=>{for(var v=0;v<d.length;v++){var g=d[v];if(!s.has(g)){s.add(g);var f=aa(g);t.addEventListener(g,Ct,{passive:f});var _=at.get(g);_===void 0?(document.addEventListener(g,Ct,{passive:f}),at.set(g,1)):at.set(g,_+1)}}};u(Ur(Vn)),Ar.add(u);var l=void 0,c=Fi(()=>{var d=r??t.appendChild(ir());return ht(()=>{if(a){me({});var v=F;v.c=a}i&&(n.$$events=i),l=e(d,n)||{},a&&pe()}),()=>{var f;for(var v of s){t.removeEventListener(v,Ct);var g=at.get(v);--g===0?(document.removeEventListener(v,Ct),at.delete(v)):at.set(v,g)}Ar.delete(u),d!==r&&((f=d.parentNode)==null||f.removeChild(d))}});return fa.set(l,c),l}let fa=new WeakMap;function W(e,t,r=!1){var n=e,i=null,a=null,o=te,s=r?nr:0,u=!1;const l=(d,v=!0)=>{u=!0,c(v,d)},c=(d,v)=>{o!==(o=d)&&(o?(i?Nt(i):v&&(i=ht(()=>v(n))),a&&Dt(a,()=>{a=null})):(a?Nt(a):v&&(a=ht(()=>v(n))),i&&Dt(i,()=>{i=null})))};or(()=>{u=!1,t(l),u||c(null,null)},s)}function xt(e,t){return t}function va(e,t,r,n){for(var i=[],a=t.length,o=0;o<a;o++)Vr(t[o].e,i,!0);var s=a>0&&i.length===0&&r!==null;if(s){var u=r.parentNode;Di(u),u.append(r),n.clear(),Ue(e,t[0].prev,t[a-1].next)}Ln(i,()=>{for(var l=0;l<a;l++){var c=t[l];s||(n.delete(c.k),Ue(e,c.prev,c.next)),Te(c.e,!s)}})}function wt(e,t,r,n,i,a=null){var o=e,s={flags:t,items:new Map,first:null},u=(t&xn)!==0;if(u){var l=e;o=l.appendChild(ir())}var c=null,d=!1;or(()=>{var v=r(),g=Nr(v)?v:v==null?[]:Ur(v),f=g.length;if(!(d&&f===0)){d=f===0;{var _=B;ga(g,s,o,i,t,(_.f&ke)!==0,n)}a!==null&&(f===0?c?Nt(c):c=ht(()=>a(o)):c!==null&&Dt(c,()=>{c=null})),r()}})}function ga(e,t,r,n,i,a,o,s){var z,E,C,M;var u=(i&ki)!==0,l=(i&(Fr|zr))!==0,c=e.length,d=t.items,v=t.first,g=v,f,_=null,k,T=[],m=[],y,S,p,x;if(u)for(x=0;x<c;x+=1)y=e[x],S=o(y,x),p=d.get(S),p!==void 0&&((z=p.a)==null||z.measure(),(k??(k=new Set)).add(p));for(x=0;x<c;x+=1){if(y=e[x],S=o(y,x),p=d.get(S),p===void 0){var D=g?g.e.nodes_start:r;_=_a(D,t,_,_===null?t.first:_.next,y,S,x,n,i),d.set(S,_),T=[],m=[],g=_.next;continue}if(l&&ha(p,y,x,i),p.e.f&ke&&(Nt(p.e),u&&((E=p.a)==null||E.unfix(),(k??(k=new Set)).delete(p))),p!==g){if(f!==void 0&&f.has(p)){if(T.length<m.length){var I=m[0],P;_=I.prev;var j=T[0],Y=T[T.length-1];for(P=0;P<T.length;P+=1)tn(T[P],I,r);for(P=0;P<m.length;P+=1)f.delete(m[P]);Ue(t,j.prev,Y.next),Ue(t,_,j),Ue(t,Y,I),g=I,_=Y,x-=1,T=[],m=[]}else f.delete(p),tn(p,g,r),Ue(t,p.prev,p.next),Ue(t,p,_===null?t.first:_.next),Ue(t,_,p),_=p;continue}for(T=[],m=[];g!==null&&g.k!==S;)(a||!(g.e.f&ke))&&(f??(f=new Set)).add(g),m.push(g),g=g.next;if(g===null)continue;p=g}T.push(p),_=p,g=p.next}if(g!==null||f!==void 0){for(var q=f===void 0?[]:Ur(f);g!==null;)(a||!(g.e.f&ke))&&q.push(g),g=g.next;var X=q.length;if(X>0){var ee=i&xn&&c===0?r:null;if(u){for(x=0;x<X;x+=1)(C=q[x].a)==null||C.measure();for(x=0;x<X;x+=1)(M=q[x].a)==null||M.fix()}va(t,q,ee,d)}}u&&sr(()=>{var ce;if(k!==void 0)for(p of k)(ce=p.a)==null||ce.apply()}),N.first=t.first&&t.first.e,N.last=_&&_.e}function ha(e,t,r,n){n&Fr&&Tr(e.v,t),n&zr?Tr(e.i,r):e.i=r}function _a(e,t,r,n,i,a,o,s,u,l){var c=(u&Fr)!==0,d=(u&Ei)===0,v=c?d?Mr(i):re(i):i,g=u&zr?re(o):o,f={i:g,v,k:a,a:null,e:null,prev:r,next:n};try{return f.e=ht(()=>s(e,v,g),In),f.e.prev=r&&r.e,f.e.next=n&&n.e,r===null?t.first=f:(r.next=f,r.e.next=f.e),n!==null&&(n.prev=f,n.e.prev=f.e),f}finally{}}function tn(e,t,r){for(var n=e.next?e.next.e.nodes_start:r,i=t?t.e.nodes_start:r,a=e.e.nodes_start;a!==n;){var o=ar(a);i.before(a),a=o}}function Ue(e,t,r){t===null?e.first=r:(t.next=r,t.e.next=r&&r.e),r!==null&&(r.prev=t,r.e.prev=t&&t.e)}function fe(e,t,r,n,i){var s;var a=(s=t.$$slots)==null?void 0:s[r],o=!1;a===!0&&(a=t.children,o=!0),a===void 0||a(e,o?()=>n:n)}function ma(e,t,r,n,i,a){var o,s,u=null,l=e,c;or(()=>{const d=t()||null;var v=kn;d!==o&&(c&&(d===null?Dt(c,()=>{c=null,s=null}):d===s?Nt(c):Te(c)),d&&d!==s&&(c=ht(()=>{u=document.createElementNS(v,d),jt(u,u);{var g=u.appendChild(ir());n(u,g)}N.nodes_end=u,l.before(u)})),o=d,o&&(s=o))},nr)}function pa(e,t){t?e.hasAttribute("selected")||e.setAttribute("selected",""):e.removeAttribute("selected")}function fr(e,t,r,n){var i=e.__attributes??(e.__attributes={});i[t]!==(i[t]=r)&&(t==="style"&&"__styles"in e&&(e.__styles={}),t==="loading"&&(e[Ir]=r),r==null?e.removeAttribute(t):typeof r!="string"&&Yn(e).includes(t)?e[t]=r:e.setAttribute(t,r))}function rn(e,t,r,n,i=!1,a=!1,o=!1){var s=t||{},u=e.tagName==="OPTION";for(var l in t)l in r||(r[l]=null);var c=Yn(e),d=e.__attributes??(e.__attributes={});for(const m in r){let y=r[m];if(u&&m==="value"&&y==null){e.value=e.__value="",s[m]=y;continue}var v=s[m];if(y!==v){s[m]=y;var g=m[0]+m[1];if(g!=="$$"){if(g==="on"){const S={},p="$$"+m;let x=m.slice(2);var f=ta(x);if(Qi(x)&&(x=x.slice(0,-7),S.capture=!0),!f&&v){if(y!=null)continue;e.removeEventListener(x,s[p],S),s[p]=null}if(y!=null)if(f)e[`__${x}`]=y,Ce([x]);else{let D=function(I){s[m].call(this,I)};var T=D;s[p]=Kn(x,e,D,S)}else f&&(e[`__${x}`]=void 0)}else if(m==="style"&&y!=null)e.style.cssText=y+"";else if(m==="autofocus")oa(e,!!y);else if(m==="__value"||m==="value"&&y!=null)e.value=e[m]=e.__value=y;else if(m==="selected"&&u)pa(e,y);else{var _=m;i||(_=na(_));var k=_==="defaultValue"||_==="defaultChecked";if(y==null&&!a&&!k)if(d[m]=null,_==="value"||_==="checked"){let S=e;if(_==="value"){let p=S.defaultValue;S.removeAttribute(_),S.defaultValue=p}else{let p=S.defaultChecked;S.removeAttribute(_),S.defaultChecked=p}}else e.removeAttribute(m);else k||c.includes(_)&&(a||typeof y!="string")?e[_]=y:typeof y!="function"&&fr(e,_,y)}m==="style"&&"__styles"in e&&(e.__styles={})}}}return s}var nn=new Map;function Yn(e){var t=nn.get(e.nodeName);if(t)return t;nn.set(e.nodeName,t=[]);for(var r,n=e,i=Element.prototype;i!==n;){r=hn(n);for(var a in r)r[a].set&&t.push(a);n=jr(n)}return t}function ba(e){if(e.loading==="lazy"){var t=e.src;e[Ir]=null,e.loading="eager",e.removeAttribute("src"),requestAnimationFrame(()=>{e[Ir]!=="eager"&&(e.loading="lazy"),e.src=t})}}function Z(e,t){var r=e.__className,n=ya(t);(r!==n||In)&&(t==null?e.removeAttribute("class"):e.className=n,e.__className=n)}function ya(e){return e??""}function Gn(e,t,r=t){var n=lr();la(e,"input",i=>{var a=i?e.defaultValue:e.value;if(a=mr(e)?pr(a):a,r(a),n&&a!==(a=t())){var o=e.selectionStart,s=e.selectionEnd;e.value=a??"",s!==null&&(e.selectionStart=o,e.selectionEnd=Math.min(s,e.value.length))}}),qe(t)==null&&e.value&&r(mr(e)?pr(e.value):e.value),Hr(()=>{var i=t();mr(e)&&i===pr(e.value)||e.type==="date"&&!i&&!e.value||i!==e.value&&(e.value=i??"")})}function mr(e){var t=e.type;return t==="number"||t==="range"}function pr(e){return e===""?null:+e}function an(e,t){return e===t||(e==null?void 0:e[Fe])===t}function ut(e={},t,r,n){return qr(()=>{var i,a;return Hr(()=>{i=a,a=[],qe(()=>{e!==r(...a)&&(t(e,...a),i&&an(r(...i),e)&&t(null,...i))})}),()=>{sr(()=>{a&&an(r(...a),e)&&t(null,...a)})}}),e}function xa(e=!1){const t=F,r=t.l.u;if(!r)return;let n=()=>Zi(t.s);if(e){let i=0,a={};const o=Ae(()=>{let s=!1;const u=t.s;for(const l in u)u[l]!==a[l]&&(a[l]=u[l],s=!0);return s&&i++,i});n=()=>h(o)}r.b.length&&Li(()=>{on(t,n),kr(r.b)}),Ee(()=>{const i=qe(()=>r.m.map(ui));return()=>{for(const a of i)typeof a=="function"&&a()}}),r.a.length&&Ee(()=>{on(t,n),kr(r.a)})}function on(e,t){if(e.l.s)for(const r of e.l.s)h(r);t()}function Xn(e,t,r){if(e==null)return t(void 0),ft;const n=qe(()=>e.subscribe(t,r));return n.unsubscribe?()=>n.unsubscribe():n}let Kt=!1;function ne(e,t,r){const n=r[t]??(r[t]={store:null,source:Mr(void 0),unsubscribe:ft});if(n.store!==e)if(n.unsubscribe(),n.store=e??null,e==null)n.source.v=void 0,n.unsubscribe=ft;else{var i=!0;n.unsubscribe=Xn(e,a=>{i?n.source.v=a:w(n.source,a)}),i=!1}return h(n.source)}function Mt(){const e={};return On(()=>{for(var t in e)e[t].unsubscribe()}),e}function wa(e){var t=Kt;try{return Kt=!1,[e(),Kt]}finally{Kt=t}}const ka={get(e,t){if(!e.exclude.includes(t))return h(e.version),t in e.special?e.special[t]():e.props[t]},set(e,t,r){return t in e.special||(e.special[t]=de({get[t](){return e.props[t]}},t,wn)),e.special[t](r),lt(e.version),!0},getOwnPropertyDescriptor(e,t){if(!e.exclude.includes(t)&&t in e.props)return{enumerable:!0,configurable:!0,value:e.props[t]}},deleteProperty(e,t){return e.exclude.includes(t)||(e.exclude.push(t),lt(e.version)),!0},has(e,t){return e.exclude.includes(t)?!1:t in e.props},ownKeys(e){return Reflect.ownKeys(e.props).filter(t=>!e.exclude.includes(t))}};function ue(e,t){return new Proxy({props:e,exclude:t,special:{},version:re(0)},ka)}const Ea={get(e,t){let r=e.props.length;for(;r--;){let n=e.props[r];if(St(n)&&(n=n()),typeof n=="object"&&n!==null&&t in n)return n[t]}},set(e,t,r){let n=e.props.length;for(;n--;){let i=e.props[n];St(i)&&(i=i());const a=Be(i,t);if(a&&a.set)return a.set(r),!0}return!1},getOwnPropertyDescriptor(e,t){let r=e.props.length;for(;r--;){let n=e.props[r];if(St(n)&&(n=n()),typeof n=="object"&&n!==null&&t in n){const i=Be(n,t);return i&&!i.configurable&&(i.configurable=!0),i}}},has(e,t){if(t===Fe||t===pn)return!1;for(let r of e.props)if(St(r)&&(r=r()),r!=null&&t in r)return!0;return!1},ownKeys(e){const t=[];for(let r of e.props){St(r)&&(r=r());for(const n in r)t.includes(n)||t.push(n)}return t}};function be(...e){return new Proxy({props:e},Ea)}function sn(e){for(var t=N,r=N;t!==null&&!(t.f&(_e|pt));)t=t.parent;try{return Se(t),e()}finally{Se(r)}}function de(e,t,r,n){var D;var i=(r&Ii)!==0,a=!yt||(r&Ti)!==0,o=(r&Si)!==0,s=(r&Pi)!==0,u=!1,l;o?[l,u]=wa(()=>e[t]):l=e[t];var c=Fe in e||pn in e,d=((D=Be(e,t))==null?void 0:D.set)??(c&&o&&t in e?I=>e[t]=I:void 0),v=n,g=!0,f=!1,_=()=>(f=!0,g&&(g=!1,s?v=qe(n):v=n),v);l===void 0&&n!==void 0&&(d&&a&&mi(),l=_(),d&&d(l));var k;if(a)k=()=>{var I=e[t];return I===void 0?_():(g=!0,f=!1,I)};else{var T=sn(()=>(i?Ae:Ni)(()=>e[t]));T.f|=di,k=()=>{var I=h(T);return I!==void 0&&(v=void 0),I===void 0?v:I}}if(!(r&wn))return k;if(d){var m=e.$$legacy;return function(I,P){return arguments.length>0?((!a||!P||m||u)&&d(P?k():I),I):k()}}var y=!1,S=!1,p=Mr(l),x=sn(()=>Ae(()=>{var I=k(),P=h(p);return y?(y=!1,S=!0,P):(S=!1,p.v=I)}));return i||(x.equals=Br),function(I,P){if(arguments.length>0){const j=P?h(x):a&&o?H(I):I;return x.equals(j)||(y=!0,w(p,j),f&&v!==void 0&&(v=j),qe(()=>h(x))),I}return h(x)}}function kt(e){F===null&&Fn(),yt&&F.l!==null?Ta(F).m.push(e):Ee(()=>{const t=qe(e);if(typeof t=="function")return t})}function Ia(e){F===null&&Fn(),kt(()=>()=>qe(e))}function Ta(e){var t=e.l;return t.u??(t.u={a:[],b:[],m:[]})}const Sa="5";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Sa);wi();/**
 * @license lucide-svelte v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pa={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};var Ca=ua("<svg><!><!></svg>");function ye(e,t){const r=ue(t,["children","$$slots","$$events","$$legacy"]),n=ue(r,["name","color","size","strokeWidth","absoluteStrokeWidth","iconNode"]);me(t,!1);let i=de(t,"name",8,void 0),a=de(t,"color",8,"currentColor"),o=de(t,"size",8,24),s=de(t,"strokeWidth",8,2),u=de(t,"absoluteStrokeWidth",8,!1),l=de(t,"iconNode",24,()=>[]);const c=(..._)=>_.filter((k,T,m)=>!!k&&m.indexOf(k)===T).join(" ");xa();var d=Ca();let v;var g=b(d);wt(g,1,l,xt,(_,k)=>{let T=()=>h(k)[0],m=()=>h(k)[1];var y=oe(),S=G(y);ma(S,T,!0,(p,x)=>{let D;$(()=>D=rn(p,D,{...m()},void 0,p.namespaceURI===kn,p.nodeName.includes("-")))}),O(_,y)});var f=R(g);fe(f,t,"default",{}),$(()=>v=rn(d,v,{...Pa,...n,width:o(),height:o(),stroke:a(),"stroke-width":u()?Number(s())*24/Number(o()):s(),class:c("lucide-icon","lucide",i()?`lucide-${i()}`:"",r.class)},void 0,!0)),O(e,d),pe()}function Jn(e,t){const r=ue(t,["children","$$slots","$$events","$$legacy"]);ye(e,be({name:"circle-user-round"},()=>r,{iconNode:[["path",{d:"M18 20a6 6 0 0 0-12 0"}],["circle",{cx:"12",cy:"10",r:"4"}],["circle",{cx:"12",cy:"12",r:"10"}]],children:(i,a)=>{var o=oe(),s=G(o);fe(s,t,"default",{}),O(i,o)},$$slots:{default:!0}}))}function Ra(e,t){const r=ue(t,["children","$$slots","$$events","$$legacy"]);ye(e,be({name:"download"},()=>r,{iconNode:[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}],["polyline",{points:"7 10 12 15 17 10"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3"}]],children:(i,a)=>{var o=oe(),s=G(o);fe(s,t,"default",{}),O(i,o)},$$slots:{default:!0}}))}function Aa(e,t){const r=ue(t,["children","$$slots","$$events","$$legacy"]);ye(e,be({name:"image-plus"},()=>r,{iconNode:[["path",{d:"M16 5h6"}],["path",{d:"M19 2v6"}],["path",{d:"M21 11.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7.5"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"}],["circle",{cx:"9",cy:"9",r:"2"}]],children:(i,a)=>{var o=oe(),s=G(o);fe(s,t,"default",{}),O(i,o)},$$slots:{default:!0}}))}function _t(e,t){const r=ue(t,["children","$$slots","$$events","$$legacy"]);ye(e,be({name:"loader-circle"},()=>r,{iconNode:[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56"}]],children:(i,a)=>{var o=oe(),s=G(o);fe(s,t,"default",{}),O(i,o)},$$slots:{default:!0}}))}function Oa(e,t){const r=ue(t,["children","$$slots","$$events","$$legacy"]);ye(e,be({name:"message-square"},()=>r,{iconNode:[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"}]],children:(i,a)=>{var o=oe(),s=G(o);fe(s,t,"default",{}),O(i,o)},$$slots:{default:!0}}))}function Da(e,t){const r=ue(t,["children","$$slots","$$events","$$legacy"]);ye(e,be({name:"moon"},()=>r,{iconNode:[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"}]],children:(i,a)=>{var o=oe(),s=G(o);fe(s,t,"default",{}),O(i,o)},$$slots:{default:!0}}))}function Na(e,t){const r=ue(t,["children","$$slots","$$events","$$legacy"]);ye(e,be({name:"send"},()=>r,{iconNode:[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z"}],["path",{d:"m21.854 2.147-10.94 10.939"}]],children:(i,a)=>{var o=oe(),s=G(o);fe(s,t,"default",{}),O(i,o)},$$slots:{default:!0}}))}function Ua(e,t){const r=ue(t,["children","$$slots","$$events","$$legacy"]);ye(e,be({name:"smile"},()=>r,{iconNode:[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9"}]],children:(i,a)=>{var o=oe(),s=G(o);fe(s,t,"default",{}),O(i,o)},$$slots:{default:!0}}))}function ja(e,t){const r=ue(t,["children","$$slots","$$events","$$legacy"]);ye(e,be({name:"sun"},()=>r,{iconNode:[["circle",{cx:"12",cy:"12",r:"4"}],["path",{d:"M12 2v2"}],["path",{d:"M12 20v2"}],["path",{d:"m4.93 4.93 1.41 1.41"}],["path",{d:"m17.66 17.66 1.41 1.41"}],["path",{d:"M2 12h2"}],["path",{d:"M20 12h2"}],["path",{d:"m6.34 17.66-1.41 1.41"}],["path",{d:"m19.07 4.93-1.41 1.41"}]],children:(i,a)=>{var o=oe(),s=G(o);fe(s,t,"default",{}),O(i,o)},$$slots:{default:!0}}))}function La(e,t){const r=ue(t,["children","$$slots","$$events","$$legacy"]);ye(e,be({name:"triangle-alert"},()=>r,{iconNode:[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"}],["path",{d:"M12 9v4"}],["path",{d:"M12 17h.01"}]],children:(i,a)=>{var o=oe(),s=G(o);fe(s,t,"default",{}),O(i,o)},$$slots:{default:!0}}))}function $r(e,t){const r=ue(t,["children","$$slots","$$events","$$legacy"]);ye(e,be({name:"x"},()=>r,{iconNode:[["path",{d:"M18 6 6 18"}],["path",{d:"m6 6 12 12"}]],children:(i,a)=>{var o=oe(),s=G(o);fe(s,t,"default",{}),O(i,o)},$$slots:{default:!0}}))}const ot=[];function ve(e,t=ft){let r=null;const n=new Set;function i(s){if(yn(e,s)&&(e=s,r)){const u=!ot.length;for(const l of n)l[1](),ot.push(l,e);if(u){for(let l=0;l<ot.length;l+=2)ot[l][0](ot[l+1]);ot.length=0}}}function a(s){i(s(e))}function o(s,u=ft){const l=[s,u];return n.add(l),n.size===1&&(r=t(i,a)||ft),s(e),()=>{n.delete(l),n.size===0&&r&&(r(),r=null)}}return{set:i,update:a,subscribe:o}}function Le(e){let t;return Xn(e,r=>t=r)(),t}const At=ve({});function Lt(e,t){return`${e}|${t}`}function Ba(e){const[t,r]=e.split("|").map(Number);return{displayer:t,other:r}}const Or=ve(new Set),mt=ve({}),Je=ve(new Set),ct=ve({}),dt=ve(new Set),Qt=ve({}),vr=ve({}),Ot=ve({});function Fa(e,t){vr.update(r=>{const n=r[e]||{};return{...r,[e]:{...n,[t]:(n[t]||0)+1}}})}function za(e,t){vr.update(r=>{const n=r[e]||{},{[t]:i,...a}=n;return{...r,[e]:a}})}const He=ve({});function Ma(e){He.update(t=>({...t,[e]:{users:[],isLoading:!0,isRefreshing:!1}}))}function Wa(e,t){He.update(r=>({...r,[e]:{...r[e],users:t,isLoading:!1,isRefreshing:!1}}))}function qa(e,t){He.update(r=>({...r,[e]:{...r[e],isRefreshing:t}}))}function Ha(e,t){return Le(He)[e].users.some(n=>n.id===t)}const je=ve({});function Va(e){je.update(t=>{const{[e]:r,...n}=t;return n})}async function Ka(e){const t=e.message;switch(t.response){case"RegistrationSuccess":Le(Je).has(e.client_id)&&(mt.update(i=>({...i,[e.client_id]:e.server_id})),Je.update(i=>(i.delete(e.client_id),i)));break;case"RegistrationFailure":Je.update(i=>(i.delete(e.client_id),i)),Qt.update(i=>{const{[e.client_id]:a,...o}=i;return o}),je.update(i=>({...i,[e.client_id]:{message:t.reason,type:"error"}}));break;case"UnregisterSuccess":Le(dt).has(e.client_id)&&(ct.update(i=>({...i,[e.client_id]:!1})),mt.update(i=>{const{[e.client_id]:a,...o}=i;return o}),dt.update(i=>(i.delete(e.client_id),i)),Qt.update(i=>{const{[e.client_id]:a,...o}=i;return o}),At.update(i=>{const a={};for(const o in i){const{displayer:s}=Ba(o);s!==e.client_id&&(a[o]=i[o])}return a}),vr.update(i=>{const{[e.client_id]:a,...o}=i;return o}),Ot.update(i=>{const{[e.client_id]:a,...o}=i;return o}));break;case"UnregisterFailure":Le(dt).has(e.client_id)&&(console.warn(`Failed to unregister client ${e.client_id}`),ct.update(i=>({...i,[e.client_id]:!1})),dt.update(i=>(i.delete(e.client_id),i)),je.update(i=>({...i,[e.client_id]:{message:t.reason,type:"error"}})));break;case"ActiveUsersList":let r=t.users.filter(i=>i.id!==e.client_id);Wa(e.client_id,r);break;case"NewUserRegistered":const n={id:t.id,name:t.name};He.update(i=>{var o;const a=((o=i[e.client_id])==null?void 0:o.users)??[];return{...i,[e.client_id]:{...i[e.client_id],users:[...a,n]}}}),je.update(i=>({...i,[e.client_id]:{message:`${t.name} joined the server`,type:"success"}}));break;case"UserUnregistered":He.update(i=>{const a=i[e.client_id].users.find(s=>s.id===t.id),o=i[e.client_id].users.filter(s=>s.id!==t.id);return a&&je.update(s=>({...s,[e.client_id]:{message:`${a.name} left the server`,type:"error"}})),{...i,[e.client_id]:{...i[e.client_id],users:o}}}),Ot.update(i=>{if(i[e.client_id]===t.id){const{[e.client_id]:a,...o}=i;return o}return i});break;case"PrivateMessage":if(Ha(e.client_id,t.sender_id)){const i=Lt(e.client_id,t.sender_id);At.update(o=>{const s=o[i]||[];return{...o,[i]:[...s,{content:t.message.content,timestamp:t.message.timestamp,sender_id:t.sender_id,receiver_id:e.client_id,server_id:e.server_id}]}}),Le(Ot)[e.client_id]!==t.sender_id&&Fa(e.client_id,t.sender_id)}break;case"UserNotFound":je.update(i=>({...i,[e.client_id]:{message:`User ${t.user_id} not found`,type:"error"}}));break;case"SendingError":if(t.message.request==="SendPrivateMessage"){const i=t.message,a=Lt(i.message.sender_id,i.recipient_id);At.update(o=>{const s=o[a];if(s)for(let u=s.length-1;u>=0;u--){const l=s[u];if(l.content.type===i.message.content.type&&l.content.data===i.message.content.data&&l.timestamp===i.message.timestamp&&l.sender_id===i.message.sender_id){l.status="failed";break}}return o})}je.update(i=>({...i,[e.client_id]:{message:t.error,type:"error"}}));break}}let Ne=null,er=0;const $a=5,Yr=ve(!1);function Zn(){return Ne&&Ne.close(),Ne=new WebSocket("ws://localhost:7374"),Ne.onopen=function(){console.log("WebSocket connection opened"),yr(!0)},Ne.onclose=function(){console.log("WebSocket connection closed"),yr(!1)},Ne.onerror=function(e){console.error("WebSocket error:",e),yr(!1)},Ne.onmessage=function(e){try{const t=JSON.parse(e.data.toString());console.info(`[WS] ${t.message.response}`,t),Ka(t)}catch(t){console.warn("Error parsing WebSocket message:",t)}},Ne}function br(){if(er>=$a){console.log("Max reconnect attempts reached");return}er++,Zn()}function yr(e){Yr.set(e),er=e?0:er}async function ln(e,t,r,n){if(!r)return;const i=Le(mt)[e],a=new Date().toLocaleTimeString("it-IT",{hour:"2-digit",minute:"2-digit"}),s={content:{type:n,data:r},timestamp:a,sender_id:e,receiver_id:t,server_id:i,status:"sent"};try{if(!(await fetch("/api/send-to",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})).ok)throw new Error("Network response was not ok");let l=Lt(e,t);return At.update(c=>{const d=c[l]||[];return{...c,[l]:[...d,s]}}),!0}catch(u){return console.error("Error sending message:",u),!1}}/*!
 * Compressor.js v1.2.1
 * https://fengyuanchen.github.io/compressorjs
 *
 * Copyright 2018-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2023-02-28T14:09:41.732Z
 */function un(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function $t(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?un(Object(r),!0).forEach(function(n){Xa(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):un(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ya(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Qn(n.key),n)}}function Ga(e,t,r){return cn(e.prototype,t),cn(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Xa(e,t,r){return t=Qn(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tr(){return tr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},tr.apply(this,arguments)}function Ja(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Qn(e){var t=Ja(e,"string");return typeof t=="symbol"?t:String(t)}var ei={exports:{}};(function(e){typeof window>"u"||function(t){var r=t.HTMLCanvasElement&&t.HTMLCanvasElement.prototype,n=t.Blob&&function(){try{return!!new Blob}catch{return!1}}(),i=n&&t.Uint8Array&&function(){try{return new Blob([new Uint8Array(100)]).size===100}catch{return!1}}(),a=t.BlobBuilder||t.WebKitBlobBuilder||t.MozBlobBuilder||t.MSBlobBuilder,o=/^data:((.*?)(;charset=.*?)?)(;base64)?,/,s=(n||a)&&t.atob&&t.ArrayBuffer&&t.Uint8Array&&function(u){var l,c,d,v,g,f,_,k,T;if(l=u.match(o),!l)throw new Error("invalid data URI");for(c=l[2]?l[1]:"text/plain"+(l[3]||";charset=US-ASCII"),d=!!l[4],v=u.slice(l[0].length),d?g=atob(v):g=decodeURIComponent(v),f=new ArrayBuffer(g.length),_=new Uint8Array(f),k=0;k<g.length;k+=1)_[k]=g.charCodeAt(k);return n?new Blob([i?_:f],{type:c}):(T=new a,T.append(f),T.getBlob(c))};t.HTMLCanvasElement&&!r.toBlob&&(r.mozGetAsFile?r.toBlob=function(u,l,c){var d=this;setTimeout(function(){c&&r.toDataURL&&s?u(s(d.toDataURL(l,c))):u(d.mozGetAsFile("blob",l))})}:r.toDataURL&&s&&(r.msToBlob?r.toBlob=function(u,l,c){var d=this;setTimeout(function(){(l&&l!=="image/png"||c)&&r.toDataURL&&s?u(s(d.toDataURL(l,c))):u(d.msToBlob(l))})}:r.toBlob=function(u,l,c){var d=this;setTimeout(function(){u(s(d.toDataURL(l,c)))})})),e.exports?e.exports=s:t.dataURLtoBlob=s}(window)})(ei);var dn=ei.exports,Za=function(t){return typeof Blob>"u"?!1:t instanceof Blob||Object.prototype.toString.call(t)==="[object Blob]"},fn={strict:!0,checkOrientation:!0,retainExif:!1,maxWidth:1/0,maxHeight:1/0,minWidth:0,minHeight:0,width:void 0,height:void 0,resize:"none",quality:.8,mimeType:"auto",convertTypes:["image/png"],convertSize:5e6,beforeDraw:null,drew:null,success:null,error:null},Qa=typeof window<"u"&&typeof window.document<"u",Ve=Qa?window:{},rr=function(t){return t>0&&t<1/0},eo=Array.prototype.slice;function Gr(e){return Array.from?Array.from(e):eo.call(e)}var to=/^image\/.+$/;function Dr(e){return to.test(e)}function ro(e){var t=Dr(e)?e.substr(6):"";return t==="jpeg"&&(t="jpg"),".".concat(t)}var ti=String.fromCharCode;function no(e,t,r){var n="",i;for(r+=t,i=t;i<r;i+=1)n+=ti(e.getUint8(i));return n}var io=Ve.btoa;function vn(e,t){for(var r=[],n=8192,i=new Uint8Array(e);i.length>0;)r.push(ti.apply(null,Gr(i.subarray(0,n)))),i=i.subarray(n);return"data:".concat(t,";base64,").concat(io(r.join("")))}function ao(e){var t=new DataView(e),r;try{var n,i,a;if(t.getUint8(0)===255&&t.getUint8(1)===216)for(var o=t.byteLength,s=2;s+1<o;){if(t.getUint8(s)===255&&t.getUint8(s+1)===225){i=s;break}s+=1}if(i){var u=i+4,l=i+10;if(no(t,u,4)==="Exif"){var c=t.getUint16(l);if(n=c===18761,(n||c===19789)&&t.getUint16(l+2,n)===42){var d=t.getUint32(l+4,n);d>=8&&(a=l+d)}}}if(a){var v=t.getUint16(a,n),g,f;for(f=0;f<v;f+=1)if(g=a+f*12+2,t.getUint16(g,n)===274){g+=8,r=t.getUint16(g,n),t.setUint16(g,1,n);break}}}catch{r=1}return r}function oo(e){var t=0,r=1,n=1;switch(e){case 2:r=-1;break;case 3:t=-180;break;case 4:n=-1;break;case 5:t=90,n=-1;break;case 6:t=90;break;case 7:t=90,r=-1;break;case 8:t=-90;break}return{rotate:t,scaleX:r,scaleY:n}}var so=/\.\d*(?:0|9){12}\d*$/;function gn(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e11;return so.test(e)?Math.round(e*t)/t:e}function Pt(e){var t=e.aspectRatio,r=e.height,n=e.width,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"none",a=rr(n),o=rr(r);if(a&&o){var s=r*t;(i==="contain"||i==="none")&&s>n||i==="cover"&&s<n?r=n/t:n=r*t}else a?r=n/t:o&&(n=r*t);return{width:n,height:r}}function lo(e){for(var t=Gr(new Uint8Array(e)),r=t.length,n=[],i=0;i+3<r;){var a=t[i],o=t[i+1];if(a===255&&o===218)break;if(a===255&&o===216)i+=2;else{var s=t[i+2]*256+t[i+3],u=i+s+2,l=t.slice(i,u);n.push(l),i=u}}return n.reduce(function(c,d){return d[0]===255&&d[1]===225?c.concat(d):c},[])}function uo(e,t){var r=Gr(new Uint8Array(e));if(r[2]!==255||r[3]!==224)return e;var n=r[4]*256+r[5],i=[255,216].concat(t,r.slice(4+n));return new Uint8Array(i)}var co=Ve.ArrayBuffer,xr=Ve.FileReader,Ge=Ve.URL||Ve.webkitURL,fo=/\.\w+$/,vo=Ve.Compressor,go=function(){function e(t,r){Ya(this,e),this.file=t,this.exif=[],this.image=new Image,this.options=$t($t({},fn),r),this.aborted=!1,this.result=null,this.init()}return Ga(e,[{key:"init",value:function(){var r=this,n=this.file,i=this.options;if(!Za(n)){this.fail(new Error("The first argument must be a File or Blob object."));return}var a=n.type;if(!Dr(a)){this.fail(new Error("The first argument must be an image File or Blob object."));return}if(!Ge||!xr){this.fail(new Error("The current browser does not support image compression."));return}co||(i.checkOrientation=!1,i.retainExif=!1);var o=a==="image/jpeg",s=o&&i.checkOrientation,u=o&&i.retainExif;if(Ge&&!s&&!u)this.load({url:Ge.createObjectURL(n)});else{var l=new xr;this.reader=l,l.onload=function(c){var d=c.target,v=d.result,g={},f=1;s&&(f=ao(v),f>1&&tr(g,oo(f))),u&&(r.exif=lo(v)),s||u?!Ge||f>1?g.url=vn(v,a):g.url=Ge.createObjectURL(n):g.url=v,r.load(g)},l.onabort=function(){r.fail(new Error("Aborted to read the image with FileReader."))},l.onerror=function(){r.fail(new Error("Failed to read the image with FileReader."))},l.onloadend=function(){r.reader=null},s||u?l.readAsArrayBuffer(n):l.readAsDataURL(n)}}},{key:"load",value:function(r){var n=this,i=this.file,a=this.image;a.onload=function(){n.draw($t($t({},r),{},{naturalWidth:a.naturalWidth,naturalHeight:a.naturalHeight}))},a.onabort=function(){n.fail(new Error("Aborted to load the image."))},a.onerror=function(){n.fail(new Error("Failed to load the image."))},Ve.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(Ve.navigator.userAgent)&&(a.crossOrigin="anonymous"),a.alt=i.name,a.src=r.url}},{key:"draw",value:function(r){var n=this,i=r.naturalWidth,a=r.naturalHeight,o=r.rotate,s=o===void 0?0:o,u=r.scaleX,l=u===void 0?1:u,c=r.scaleY,d=c===void 0?1:c,v=this.file,g=this.image,f=this.options,_=document.createElement("canvas"),k=_.getContext("2d"),T=Math.abs(s)%180===90,m=(f.resize==="contain"||f.resize==="cover")&&rr(f.width)&&rr(f.height),y=Math.max(f.maxWidth,0)||1/0,S=Math.max(f.maxHeight,0)||1/0,p=Math.max(f.minWidth,0)||0,x=Math.max(f.minHeight,0)||0,D=i/a,I=f.width,P=f.height;if(T){var j=[S,y];y=j[0],S=j[1];var Y=[x,p];p=Y[0],x=Y[1];var q=[P,I];I=q[0],P=q[1]}m&&(D=I/P);var X=Pt({aspectRatio:D,width:y,height:S},"contain");y=X.width,S=X.height;var ee=Pt({aspectRatio:D,width:p,height:x},"cover");if(p=ee.width,x=ee.height,m){var z=Pt({aspectRatio:D,width:I,height:P},f.resize);I=z.width,P=z.height}else{var E=Pt({aspectRatio:D,width:I,height:P}),C=E.width;I=C===void 0?i:C;var M=E.height;P=M===void 0?a:M}I=Math.floor(gn(Math.min(Math.max(I,p),y))),P=Math.floor(gn(Math.min(Math.max(P,x),S)));var ce=-I/2,xe=-P/2,Ke=I,we=P,se=[];if(m){var Oe=0,Re=0,et=i,Et=a,Wt=Pt({aspectRatio:D,width:i,height:a},{contain:"cover",cover:"contain"}[f.resize]);et=Wt.width,Et=Wt.height,Oe=(i-et)/2,Re=(a-Et)/2,se.push(Oe,Re,et,Et)}if(se.push(ce,xe,Ke,we),T){var qt=[P,I];I=qt[0],P=qt[1]}_.width=I,_.height=P,Dr(f.mimeType)||(f.mimeType=v.type);var tt="transparent";v.size>f.convertSize&&f.convertTypes.indexOf(f.mimeType)>=0&&(f.mimeType="image/jpeg");var rt=f.mimeType==="image/jpeg";if(rt&&(tt="#fff"),k.fillStyle=tt,k.fillRect(0,0,I,P),f.beforeDraw&&f.beforeDraw.call(this,k,_),!this.aborted&&(k.save(),k.translate(I/2,P/2),k.rotate(s*Math.PI/180),k.scale(l,d),k.drawImage.apply(k,[g].concat(se)),k.restore(),f.drew&&f.drew.call(this,k,_),!this.aborted)){var Ht=function(ge){if(!n.aborted){var Vt=function($e){return n.done({naturalWidth:i,naturalHeight:a,result:$e})};if(ge&&rt&&f.retainExif&&n.exif&&n.exif.length>0){var It=function($e){return Vt(dn(vn(uo($e,n.exif),f.mimeType)))};if(ge.arrayBuffer)ge.arrayBuffer().then(It).catch(function(){n.fail(new Error("Failed to read the compressed image with Blob.arrayBuffer()."))});else{var De=new xr;n.reader=De,De.onload=function(Tt){var $e=Tt.target;It($e.result)},De.onabort=function(){n.fail(new Error("Aborted to read the compressed image with FileReader."))},De.onerror=function(){n.fail(new Error("Failed to read the compressed image with FileReader."))},De.onloadend=function(){n.reader=null},De.readAsArrayBuffer(ge)}}else Vt(ge)}};_.toBlob?_.toBlob(Ht,f.mimeType,f.quality):Ht(dn(_.toDataURL(f.mimeType,f.quality)))}}},{key:"done",value:function(r){var n=r.naturalWidth,i=r.naturalHeight,a=r.result,o=this.file,s=this.image,u=this.options;if(Ge&&s.src.indexOf("blob:")===0&&Ge.revokeObjectURL(s.src),a)if(u.strict&&!u.retainExif&&a.size>o.size&&u.mimeType===o.type&&!(u.width>n||u.height>i||u.minWidth>n||u.minHeight>i||u.maxWidth<n||u.maxHeight<i))a=o;else{var l=new Date;a.lastModified=l.getTime(),a.lastModifiedDate=l,a.name=o.name,a.name&&a.type!==o.type&&(a.name=a.name.replace(fo,ro(a.type)))}else a=o;this.result=a,u.success&&u.success.call(this,a)}},{key:"fail",value:function(r){var n=this.options;if(n.error)n.error.call(this,r);else throw r}},{key:"abort",value:function(){this.aborted||(this.aborted=!0,this.reader?this.reader.abort():this.image.complete?this.fail(new Error("The compression process has been aborted.")):(this.image.onload=null,this.image.onabort()))}}],[{key:"noConflict",value:function(){return window.Compressor=vo,e}},{key:"setDefaults",value:function(r){tr(fn,r)}}]),e}();const ho=["image/jpeg","image/png","image/gif","image/webp","image/svg+xml"];function _o(e){return e.type==="image/svg+xml"?Promise.resolve(e):new Promise((t,r)=>{new go(e,{quality:.8,maxWidth:1920,maxHeight:1080,success:n=>{t(n)},error:n=>{console.error("Compression failed:",n),r(n)}})})}async function wr(e){if(e.type==="image/svg+xml"){const t=await e.text();return`data:image/svg+xml;base64,${btoa(t)}`}if(Gt(e)){const t=await new Promise((i,a)=>{const o=new FileReader;o.readAsDataURL(e),o.onload=()=>i(o.result),o.onerror=s=>a(s)});console.log(`Original image size: ${(t.length*.75/1024).toFixed(2)}KB`);const r=await _o(e),n=await new Promise((i,a)=>{const o=new FileReader;o.readAsDataURL(r),o.onload=()=>i(o.result),o.onerror=s=>a(s)});return console.log(`Compressed image size: ${(n.length*.75/1024).toFixed(2)}KB`),console.log(`Compression ratio: ${(100-n.length/t.length*100).toFixed(2)}%`),n}return new Promise((t,r)=>{const n=new FileReader;n.readAsDataURL(e),n.onload=()=>t(n.result),n.onerror=i=>r(i)})}function Gt(e){return ho.includes(e.type)}var mo=(e,t)=>{e.stopPropagation(),w(t,!h(t))},po=(e,t,r)=>{e.stopPropagation(),t(h(r))},bo=U('<button class="emoji-option p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-colors duration-200"> </button>'),yo=U('<div class="absolute right-3 top-1/2 -translate-y-1/2 flex items-center gap-2 text-gray-400"><button class="emoji-button hover:text-gray-600 dark:hover:text-gray-300 transition-colors duration-200 bg-white dark:bg-gray-700 rounded-full p-1" aria-label="Insert emoji"><!></button> <div></div></div>');function xo(e,t){me(t,!0);let r=K(!1),n;const i=["","","","","","","","","","","","","","","","","","","",""],a=d=>{var v;(v=t.onEmojiSelect)==null||v.call(t,d)},o=d=>{n&&!n.contains(d.target)&&w(r,!1)};kt(()=>(document.addEventListener("click",o),()=>{document.removeEventListener("click",o)}));var s=yo(),u=b(s);u.__click=[mo,r];var l=b(u);Ua(l,{class:"size-5"});var c=R(u,2);wt(c,21,()=>i,xt,(d,v)=>{var g=bo();g.__click=[po,a,v];var f=b(g);$(()=>ie(f,h(v))),O(d,g)}),ut(c,d=>n=d,()=>n),$(()=>Z(c,`emoji-dropdown ${(h(r)?"grid":"hidden")??""} select-none absolute bottom-full right-0 mb-2 w-64 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 p-2 grid-cols-5 gap-2`)),O(e,s),pe()}Ce(["click"]);var wo=U("<div> </div>"),ko=(e,t)=>{var r;return(r=t.onImageClick)==null?void 0:r.call(t,t.message.content.data)},Eo=U('<div><img alt="Sent img" class="w-full h-auto rounded-xl object-cover cursor-pointer hover:opacity-90 transition-opacity" loading="lazy"></div>'),Io=U('<div><div><!> <div><span class="text-xs text-gray-500 dark:text-gray-400"> </span> <!></div></div></div>');function To(e,t){me(t,!0);var r=Io(),n=b(r),i=b(n);{var a=v=>{var g=wo(),f=b(g);$(()=>{Z(g,`inline-block rounded-2xl px-4 py-2 ${(t.isReceived?"bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-100 rounded-bl-none":t.message.status==="failed"?"bg-blue-300 text-white rounded-br-none":"bg-blue-500 text-white rounded-br-none")??""} shadow-sm break-words whitespace-pre-wrap overflow-hidden svelte-sjx01p`),ie(f,t.message.content.data)}),O(v,g)},o=v=>{var g=oe(),f=G(g);{var _=k=>{var T=Eo(),m=b(T);m.__click=[ko,t],$(()=>{Z(T,`p-1 rounded-xl ${(t.isReceived?"bg-gray-100 dark:bg-gray-700 rounded-bl-none":t.message.status==="failed"?"bg-blue-300 rounded-br-none":"bg-blue-500 rounded-br-none")??""} shadow-sm`),fr(m,"src",t.message.content.data)}),st("load",m,function(...y){var S;(S=t.onImageLoad)==null||S.apply(this,y)}),ba(m),O(k,T)};W(f,k=>{t.message.content.type==="Image"&&k(_)},!0)}O(v,g)};W(i,v=>{t.message.content.type==="Text"?v(a):v(o,!1)})}var s=R(i,2),u=b(s),l=b(u),c=R(u,2);{var d=v=>{La(v,{class:"size-3 text-red-500"})};W(c,v=>{t.message.status==="failed"&&v(d)})}$(()=>{Z(r,`flex ${(t.isReceived?"justify-start":"justify-end")??""} animate-fadeIn`),Z(n,`flex flex-col ${(t.message.content.type==="Text"?"max-w-[70%]":"w-[60%]")??""} gap-0.5`),Z(s,`flex items-center gap-1 px-1 ${(t.isReceived?"justify-start":"justify-end")??""}`),ie(l,t.message.timestamp)}),O(e,r),pe()}Ce(["click"]);var So=U('<div class="absolute top-20 left-1/2 -translate-x-1/2 z-10"><div><span> </span> <button class="ml-2 p-1 hover:bg-black/20 rounded-full transition-colors" aria-label="Dismiss"><!></button></div></div>');function ri(e,t){me(t,!0);let r=de(t,"type",3,"error"),n=de(t,"duration",3,3e3);de(t,"key",3,0);let i=K(!0),a;Ee(()=>(w(i,!0),a&&clearTimeout(a),a=setTimeout(()=>{o()},n()),()=>{a&&clearTimeout(a)}));function o(){var c;w(i,!1),a&&clearTimeout(a),(c=t.onClose)==null||c.call(t)}var s=oe(),u=G(s);{var l=c=>{var d=So(),v=b(d),g=b(v),f=b(g),_=R(g,2);_.__click=o;var k=b(_);$r(k,{class:"size-4"}),$(()=>{Z(v,`px-4 py-2 rounded-lg shadow-lg ${(r()==="error"?"bg-red-500":"bg-green-500")??""} text-white flex items-center gap-2`),ie(f,t.message)}),O(c,d)};W(u,c=>{h(i)&&c(l)})}O(e,s),pe()}Ce(["click"]);function Po(e,t,r){w(t,null),w(r,null)}function Co(e,t){e.key==="Enter"&&!e.shiftKey&&(e.preventDefault(),t())}var Ro=U('<div class="absolute inset-5 backdrop-blur-sm bg-blue-100/70 dark:bg-blue-900/70 border-2 border-dashed border-blue-500 rounded-lg flex items-center justify-center z-10 pointer-events-none"><p class="text-blue-600 dark:text-blue-400 font-medium">Release here to attach image</p></div>'),Ao=U('<div class="absolute inset-0 flex items-center justify-center"><!></div>'),Oo=U('<button class="absolute -top-2 -right-2 p-1.5 bg-red-500 text-white rounded-full hover:bg-red-600 transition-colors shadow-lg"><!></button>'),Do=U('<div class="p-4 border-t border-gray-100 dark:border-gray-700 bg-gray-50 dark:bg-gray-800"><div class="relative inline-block"><img alt="Preview"> <!></div></div>'),No=U('<div class="w-full h-[450px] flex flex-col"><div class="p-4 border-b border-gray-100 dark:border-gray-700"><div class="flex items-center justify-between"><h3 class="text-lg font-semibold text-gray-800 dark:text-gray-100 flex items-center gap-2"><!> </h3> <span class="text-sm text-gray-500 dark:text-gray-400"> </span></div></div> <div class="relative flex-1 overflow-hidden"><!> <div class="chat-box absolute inset-0 overflow-y-auto space-y-4 p-4 scrollbar-thin scrollbar-thumb-gray-300 dark:scrollbar-thumb-gray-700"></div></div> <!> <div class="p-4 border-t border-gray-100 dark:border-gray-700"><div class="flex gap-2"><input type="file" accept="image/*" class="hidden"> <button class="p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 transition-colors" title="Attach image"><!></button> <div class="relative flex-1"><input type="text" class="message-input w-full px-4 py-2 rounded-lg border border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 text-gray-800 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors duration-200" placeholder="Write a message..."> <!></div> <button class="send-button p-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors duration-200 flex items-center justify-center"><!></button></div></div></div> <!>',1);function Uo(e,t){me(t,!0);const r=Mt(),n=()=>ne(He,"$clientUsers",r),i=()=>ne(At,"$messages",r);let a=K(void 0),o=K(""),s,u,l=!0,c=K(!1),d=K(""),v=K(0);const g=Ae(()=>{var A;return((A=n()[t.clientId])==null?void 0:A.users.find(L=>L.id===t.destinationId))??{id:t.destinationId,name:`Client ${t.destinationId}`}}),f=()=>{s&&(s.scrollTop=s.scrollHeight)};function _(){setTimeout(f,60)}Bi(()=>{s&&f()}),Ee(()=>{i()[Lt(t.clientId,t.destinationId)]&&l&&setTimeout(f,60)}),Ee(()=>{l=!0,t.destinationId,setTimeout(f,0)}),Ee(()=>{t.destinationId,setTimeout(()=>{var A;(A=h(a))==null||A.focus()},0)});const k=()=>{if(!s)return;l=Math.abs(s.scrollHeight-s.scrollTop-s.clientHeight)<=1};let T=K(null),m=K(null),y,S=K(!1);async function p(A){var J;const L=A.target,V=(J=L.files)==null?void 0:J[0];if(V&&Gt(V))try{w(T,H(await wr(V))),w(m,H(h(T)))}catch(Ye){console.error("Error processing image:",Ye),w(d,"Failed to process image. Please try again."),lt(v),w(c,!0)}L.value=""}async function x(A){var V;const L=(V=A.clipboardData)==null?void 0:V.items;if(L){for(const J of L)if(J.kind==="file"){const Ye=J.getAsFile();if(Ye&&Gt(Ye)){A.preventDefault();try{w(T,H(await wr(Ye))),w(m,H(h(T)))}catch(hr){console.error("Error processing pasted image:",hr),w(d,"Failed to process image. Please try again."),lt(v),w(c,!0)}return}}}}async function D(){if(!(!h(T)&&!h(o).trim()))try{h(T)&&(w(S,!0),await ln(t.clientId,t.destinationId,h(T),"Image"),w(T,null),w(m,null),w(S,!1)),h(o).trim()&&(await ln(t.clientId,t.destinationId,h(o),"Text"),w(o,""),h(a)&&(h(a).value="")),l=!0,setTimeout(()=>{f(),setTimeout(f,50)},60)}catch(A){w(S,!1),console.error(A),w(d,"Failed to send message. Please try again."),lt(v),w(c,!0)}}function I(A){var V;const L=((V=h(a))==null?void 0:V.selectionStart)??h(o).length;w(o,h(o).slice(0,L)+A+h(o).slice(L)),setTimeout(()=>{if(h(a)){const J=L+A.length;h(a).setSelectionRange(J,J),h(a).focus()}},0)}let P=K(!1);function j(A){A.preventDefault(),A.stopPropagation(),w(P,!0)}function Y(A){const L=s.getBoundingClientRect(),V=A.clientX,J=A.clientY;(V<=L.left||V>=L.right||J<=L.top||J>=L.bottom)&&w(P,!1)}async function q(A){var V;A.preventDefault(),w(P,!1);const L=(V=A.dataTransfer)==null?void 0:V.files[0];if(L&&Gt(L))try{w(T,H(await wr(L))),w(m,H(h(T)))}catch(J){console.error("Error processing dropped image:",J),w(d,"Failed to process image. Please try again."),lt(v),w(c,!0)}}var X=No(),ee=G(X),z=b(ee),E=b(z),C=b(E),M=b(C);Jn(M,{class:"size-5 text-gray-600 dark:text-gray-300"});var ce=R(M),xe=R(C,2),Ke=b(xe),we=R(z,2),se=b(we);{var Oe=A=>{var L=Ro();O(A,L)};W(se,A=>{h(P)&&A(Oe)})}var Re=R(se,2);wt(Re,5,()=>i()[Lt(t.clientId,t.destinationId)]||[],xt,(A,L)=>{var V=Ae(()=>h(L).sender_id!==t.clientId);To(A,{get message(){return h(L)},get isReceived(){return h(V)},get onImageClick(){return t.onImageClick},onImageLoad:_})}),ut(Re,A=>s=A,()=>s),ut(we,A=>u=A,()=>u);var et=R(we,2);{var Et=A=>{var L=Do(),V=b(L),J=b(V),Ye=R(J,2);{var hr=nt=>{var it=Ao(),_r=b(it);_t(_r,{class:"size-8 text-blue-500 animate-spin"}),O(nt,it)},ii=nt=>{var it=Oo();it.__click=[Po,T,m];var _r=b(it);$r(_r,{class:"size-4"}),O(nt,it)};W(Ye,nt=>{h(S)?nt(hr):nt(ii,!1)})}$(()=>{fr(J,"src",h(m)),Z(J,`max-h-48 min-h-[96px] min-w-[96px] rounded-lg ${(h(S)?"opacity-50":"")??""} object-contain bg-gray-100 dark:bg-gray-700`)}),O(A,L)};W(et,A=>{h(m)&&A(Et)})}var Wt=R(et,2),qt=b(Wt),tt=b(qt);tt.__change=p,ut(tt,A=>y=A,()=>y);var rt=R(tt,2);rt.__click=()=>y.click();var Ht=b(rt);Aa(Ht,{class:"size-5"});var gr=R(rt,2),ge=b(gr);ge.__keydown=[Co,D],ut(ge,A=>w(a,A),()=>h(a));var Vt=R(ge,2);xo(Vt,{get inputElement(){return h(a)},onEmojiSelect:I});var It=R(gr,2);It.__click=D;var De=b(It);Na(De,{class:"size-5"});var Tt=R(ee,2);{var $e=A=>{ri(A,{get message(){return h(d)},type:"error",onClose:()=>w(c,!1),get key(){return h(v)}})};W(Tt,A=>{h(c)&&A($e)})}$(()=>{ie(ce,` ${h(g).name??""}`),ie(Ke,`ID: ${h(g).id??""}`)}),st("scroll",Re,k),st("dragover",Re,j),st("dragleave",Re,Y),st("drop",Re,q),st("paste",ge,x),Gn(ge,()=>h(o),A=>w(o,A)),O(e,X),pe()}Ce(["click","change","keydown"]);async function ni(e){try{const t=Le(mt)[e];if(!(await fetch(`/api/registered-users?client_id=${e}&server_id=${t}`,{method:"GET",headers:{"Content-Type":"application/json"}})).ok)throw new Error("Failed to request registered users")}catch(t){console.error("Error requesting registered users:",t)}}var jo=e=>e.stopPropagation(),Lo=U('<div><div class="relative w-[80%] h-[80%] flex items-center justify-center"><div class="relative w-full h-full flex items-center justify-center"><img alt="Full size" class="rounded-lg shadow-xl min-w-[300px] min-h-[300px] w-auto h-auto max-w-full max-h-full object-contain"> <div class="absolute -top-4 -right-4 flex gap-2"><button class="p-2 bg-white/20 hover:bg-white/30 text-white rounded-full transition-colors shadow-lg backdrop-blur-sm"><!></button> <button class="p-2 bg-white/20 hover:bg-white/30 text-white rounded-full transition-colors shadow-lg backdrop-blur-sm"><!></button></div></div></div></div>');function Bo(e,t){me(t,!0);let r=de(t,"containerClass",3,"");function n(f){f.key==="Escape"&&t.onClose()}function i(){const f=document.createElement("a");f.href=t.src,f.download=`image-${Date.now()}.png`,document.body.appendChild(f),f.click(),document.body.removeChild(f)}kt(()=>(document.addEventListener("keydown",n),()=>{document.removeEventListener("keydown",n)}));var a=Lo();a.__click=function(...f){var _;(_=t.onClose)==null||_.apply(this,f)};var o=b(a);o.__click=[jo];var s=b(o),u=b(s),l=R(u,2),c=b(l);c.__click=i;var d=b(c);Ra(d,{class:"size-5"});var v=R(c,2);v.__click=function(...f){var _;(_=t.onClose)==null||_.apply(this,f)};var g=b(v);$r(g,{class:"size-5"}),$(()=>{Z(a,`absolute inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm ${r()??""}`),fr(u,"src",t.src)}),O(e,a),pe()}Ce(["click"]);async function Fo(e,t){qa(t.clientId,!0),await ni(t.clientId)}var zo=U('<div class="flex justify-center py-4"><div class="w-6 h-6 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"></div></div>'),Mo=(e,t,r)=>t(h(r).id),Wo=U('<span class="absolute right-2 top-1/2 -translate-y-1/2 min-w-[20px] h-5 flex items-center justify-center bg-blue-500 text-white text-xs rounded-full px-1.5"> </span>'),qo=U("<button><!> <span> </span> <!></button>"),Ho=U('<div class="space-y-2"></div>'),Vo=U('<div class="relative flex-1"><!> <!></div>'),Ko=U('<div class="flex items-center justify-center w-full h-[450px]"><p class="text-gray-500 dark:text-gray-400">Select a user to start chatting</p></div>'),$o=U(`<div class="flex w-full"><div class="w-52 bg-white dark:bg-gray-800 border-r border-gray-300 dark:border-gray-700 overflow-hidden"><div class="p-2 border-b border-gray-300 dark:border-gray-700"><button class="w-full px-3 py-2 flex items-center justify-center gap-2 text-sm
                       bg-gray-100 dark:bg-gray-600 hover:bg-gray-200 dark:hover:bg-gray-500
                       rounded-lg transition-colors text-gray-800 dark:text-white"><span>Refresh Users</span> <!></button></div> <div class="px-3 py-2"><!></div></div> <!></div>`);function Yo(e,t){me(t,!0);const r=Mt(),n=()=>ne(He,"$clientUsers",r),i=()=>ne(vr,"$unreadMessages",r);let a=de(t,"destinationId",31,()=>-1);kt(()=>{Ma(t.clientId),ni(t.clientId)});let o=K(null);Ee(()=>{Ot.update(p=>({...p,[t.clientId]:a()})),a()!==-1&&za(t.clientId,a()),w(o,null)});function s(p){a(p)}var u=$o(),l=b(u),c=b(l),d=b(c);d.__click=[Fo,t];var v=R(b(d),2);{var g=p=>{_t(p,{class:"size-4 animate-spin"})};W(v,p=>{var x;(x=n()[t.clientId])!=null&&x.isRefreshing&&p(g)})}var f=R(c,2),_=b(f);{var k=p=>{var x=zo();O(p,x)},T=p=>{var x=Ho();wt(x,5,()=>{var D;return((D=n()[t.clientId])==null?void 0:D.users)||[]},xt,(D,I)=>{var P=qo();P.__click=[Mo,s,I];var j=b(P),Y=Ae(()=>`size-5 ${(a()===h(I).id?"text-blue-600 dark:text-blue-400":"text-gray-600 dark:text-gray-300")??""}`);Jn(j,{get class(){return h(Y)}});var q=R(j,2),X=b(q),ee=R(q,2);{var z=E=>{var C=Wo(),M=b(C);$(()=>ie(M,i()[t.clientId][h(I).id])),O(E,C)};W(ee,E=>{var C;(((C=i()[t.clientId])==null?void 0:C[h(I).id])??0)>0&&E(z)})}$(()=>{Z(P,`w-full p-2 rounded cursor-pointer transition-colors flex items-center gap-2 relative
                                   ${(a()===h(I).id?"bg-blue-100 dark:bg-blue-900":"hover:bg-gray-100 dark:hover:bg-gray-700")??""}`),Z(q,a()===h(I).id?"text-blue-600 dark:text-blue-400 font-medium":"text-gray-800 dark:text-gray-100"),ie(X,h(I).name)}),O(D,P)}),O(p,x)};W(_,p=>{var x;(x=n()[t.clientId])!=null&&x.isLoading?p(k):p(T,!1)})}var m=R(l,2);{var y=p=>{var x=Vo(),D=b(x);Uo(D,{get clientId(){return t.clientId},get destinationId(){return a()},onImageClick:j=>w(o,H(j))});var I=R(D,2);{var P=j=>{Bo(j,{get src(){return h(o)},onClose:()=>w(o,null)})};W(I,j=>{h(o)&&j(P)})}O(p,x)},S=p=>{var x=Ko();O(p,x)};W(m,p=>{a()!==-1?p(y):p(S,!1)})}O(e,u),pe()}Ce(["click"]);function Go(e,t,r,n){e.key==="Enter"&&h(t).trim()?(e.preventDefault(),r()):e.key==="Escape"&&(e.preventDefault(),n())}function Xo(e,t,r,n){if(h(t).length>0){const i=Math.floor(Math.random()*h(t).length);w(r,H(h(t)[i])),w(n,!0)}}var Jo=U('<div class="flex items-center justify-center w-full h-[450px]"><div class="text-center"><!> <p class="text-gray-600 dark:text-gray-300 mb-4">Registering to server...</p> <button class="px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors">Cancel</button></div></div>'),Zo=(e,t,r,n)=>{w(t,H(h(r))),w(n,!0)},Qo=U("<button> </button>"),es=U(`<div class="flex justify-center pt-4"><button class="px-6 py-3 bg-blue-600 dark:bg-blue-700 text-white rounded-lg
                                   transition-all hover:bg-blue-700 dark:hover:bg-blue-600
                                   hover:shadow-md w-full sm:w-auto">Connect to Random Server</button></div>`),ts=U(`<div class="absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center z-10 p-4"><div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-xl max-w-sm w-full"><h2 class="text-xl font-semibold mb-4 text-gray-800 dark:text-gray-200"> </h2> <input type="text" placeholder="Enter your username" class="w-full p-3 mb-4 border rounded-lg dark:bg-gray-700 dark:text-gray-200
                               focus:ring-2 focus:ring-blue-500 focus:border-transparent"> <div class="flex justify-end gap-3"><button class="px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors">Cancel</button> <button class="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors
                                   disabled:opacity-50 disabled:cursor-not-allowed">Join Server</button></div></div></div>`),rs=U(`<div class="flex items-center justify-center flex-col w-full h-[450px] p-6"><div class="w-full max-w-md space-y-6"><div class="flex items-center justify-between"><h2 class="text-xl font-semibold text-gray-700 dark:text-gray-300">Available Servers</h2> <button class="inline-flex items-center justify-center px-3 py-2 rounded-lg
                               bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600
                               transition-colors gap-2 text-gray-700 dark:text-gray-300"><span class="text-sm font-medium">Refresh</span> <!></button></div> <div></div> <!></div></div> <!>`,1),ns=U('<div class="flex w-full relative"><!></div>');function is(e,t){me(t,!0);const r=Mt(),n=()=>ne(Je,"$pendingRegistrations",r);let i=K(H([])),a=K(!1),o=K(-1),s=K(""),u=K(!1),l;async function c(){w(u,!0);try{let m=await fetch(`/api/servers?id=${t.clientId}`);w(i,H((await m.json()).sort((y,S)=>y-S)))}catch(m){console.error(m),w(i,H([]))}finally{setTimeout(()=>{w(u,!1)},600)}}kt(async()=>{await c()}),Ee(()=>{h(a)&&l&&l.focus()});async function d(){try{Je.update(y=>(y.add(t.clientId),y)),(await fetch("/api/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:t.clientId,server_id:h(o),username:h(s)})})).ok?(w(a,!1),Qt.update(y=>({...y,[t.clientId]:h(s)})),w(s,"")):(Je.update(y=>(y.delete(t.clientId),y)),t.showToast(`Registration failed for Server ${h(o)}. Please try again.`,"error"))}catch(m){console.error(m),t.showToast(`Registration failed for Server ${h(o)}. Please try again.`,"error")}}async function v(){try{(await fetch("/api/unregister",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:t.clientId,server_id:h(o)})})).ok?Je.update(y=>(y.delete(t.clientId),y)):t.showToast("Failed to cancel registration. Please try again.","error")}catch(m){console.error(m),t.showToast("Failed to cancel registration. Please try again.","error")}}function g(){w(a,!1),w(s,"")}var f=ns(),_=b(f);{var k=m=>{var y=Jo(),S=b(y),p=b(S);_t(p,{class:"size-8 animate-spin mx-auto mb-4 text-blue-500"});var x=R(p,4);x.__click=v,O(m,y)},T=m=>{var y=rs(),S=G(y),p=b(S),x=b(p),D=R(b(x),2);D.__click=c;var I=R(b(D),2),P=Ae(()=>`size-5 ${(h(u)?"animate-spin":"hidden")??""}`);_t(I,{get class(){return h(P)}});var j=R(x,2);wt(j,21,()=>h(i),xt,(z,E)=>{var C=Qo();C.__click=[Zo,o,E,a];var M=b(C);$(()=>{Z(C,`flex items-center justify-center px-6 py-3
                                   bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600
                                   text-gray-800 dark:text-gray-200 rounded-lg transition-all
                                   hover:shadow-md border border-gray-300 dark:border-gray-600
                                   ${(h(i).length===1?"text-lg":"")??""}`),ie(M,`Server ${h(E)??""}`)}),O(z,C)});var Y=R(j,2);{var q=z=>{var E=es(),C=b(E);C.__click=[Xo,i,o,a],O(z,E)};W(Y,z=>{h(i).length>1&&z(q)})}var X=R(S,2);{var ee=z=>{var E=ts(),C=b(E),M=b(C),ce=b(M),xe=R(M,2);xe.__keydown=[Go,s,d,g],ut(xe,Oe=>l=Oe,()=>l);var Ke=R(xe,2),we=b(Ke);we.__click=g;var se=R(we,2);se.__click=d,$(()=>{ie(ce,`Connect to Server ${h(o)??""}`),se.disabled=!h(s)}),Gn(xe,()=>h(s),Oe=>w(s,Oe)),O(z,E)};W(X,z=>{h(a)&&z(ee)})}$(()=>{D.disabled=h(u),Z(j,`grid gap-3 ${(h(i).length===1?"":"sm:grid-cols-2")??""}`)}),O(m,y)};W(_,m=>{n().has(t.clientId)?m(k):m(T,!1)})}O(e,f),pe()}Ce(["click","keydown"]);var as=U('<button class="px-2 py-1 text-xs bg-red-500 hover:bg-red-600 text-white rounded transition-colors duration-200 flex items-center gap-1 disabled:opacity-75"><!> Disconnect</button> <span class="text-xs text-gray-500 dark:text-gray-400 bg-blue-100 dark:bg-blue-900 px-2 py-1 rounded-full"> </span>',1),os=U('<div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg overflow-hidden transition-transform duration-200 relative"><div class="p-4 border-b border-gray-300 dark:border-gray-700"><div class="flex justify-between items-center"><div class="flex items-center gap-2"><div class="relative"><div></div> <div></div></div> <h2 class="text-lg font-semibold text-gray-800 dark:text-gray-100"> </h2></div> <div class="flex items-center gap-2"><!> <span class="text-xs text-gray-500 dark:text-gray-400 bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded-full"> </span></div></div></div> <!> <!></div>');function ss(e,t){me(t,!0);const r=Mt(),n=()=>ne(Ot,"$currentChats",r),i=()=>ne(je,"$userEvents",r),a=()=>ne(ct,"$isDisconnecting",r),o=()=>ne(mt,"$registrationStatus",r),s=()=>ne(Yr,"$connectionStatus",r),u=()=>ne(Qt,"$clientUsernames",r);let l=Ae(()=>n()[t.clientId]??-1),c=K(null);Ee(()=>{const E=i()[t.clientId];E&&(w(c,H({message:E.message,type:E.type,key:Date.now()})),Va(t.clientId))});function d(E,C){w(c,H({message:E,type:C,key:Date.now()}))}async function v(){if(!a()[t.clientId]){ct.update(E=>({...E,[t.clientId]:!0}));try{if(dt.update(C=>(C.add(t.clientId),C)),!(await fetch("/api/unregister",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:t.clientId,server_id:o()[t.clientId]})})).ok){ct.update(C=>({...C,[t.clientId]:!1})),dt.update(C=>(C.delete(t.clientId),C));return}}catch(E){console.error("Error unregistering:",E),ct.update(C=>({...C,[t.clientId]:!1}))}}}var g=os(),f=b(g),_=b(f),k=b(_),T=b(k),m=b(T),y=R(m,2),S=R(T,2),p=b(S),x=R(k,2),D=b(x);{var I=E=>{var C=as(),M=G(C);M.__click=v;var ce=b(M);{var xe=se=>{_t(se,{class:"size-3 animate-spin"})};W(ce,se=>{a()[t.clientId]&&se(xe)})}var Ke=R(M,2),we=b(Ke);$(()=>{M.disabled=a()[t.clientId],ie(we,`Server ${o()[t.clientId]??""}`)}),O(E,C)};W(D,E=>{o()[t.clientId]&&E(I)})}var P=R(D,2),j=b(P),Y=R(f,2);{var q=E=>{Yo(E,{get clientId(){return t.clientId},get destinationId(){return h(l)}})},X=E=>{is(E,{get clientId(){return t.clientId},showToast:d})};W(Y,E=>{o()[t.clientId]?E(q):E(X,!1)})}var ee=R(Y,2);{var z=E=>{ri(E,{get message(){return h(c).message},get type(){return h(c).type},onClose:()=>w(c,null),get key(){return h(c).key}})};W(ee,E=>{h(c)&&E(z)})}$(()=>{Z(m,`status-indicator w-3 h-3 ${(s()?"bg-green-500":"bg-red-500")??""} rounded-full`),Z(y,`status-ping w-3 h-3 ${(s()?"bg-green-500 animate-ping":"bg-red-500")??""} rounded-full absolute inset-0`),ie(p,u()[t.clientId]||`Chat ${t.clientId}`),ie(j,`ID: ${t.clientId??""}`)}),O(e,g),pe()}Ce(["click"]);function ls(){const e=localStorage.getItem("theme");e==="dark"||!e&&window.matchMedia("(prefers-color-scheme: dark)").matches?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")}async function us(){ls();try{const t=await(await fetch("/api/clients")).json();t.sort(),t.forEach(r=>{Or.set(new Set([...Le(Or),r]))})}catch(e){console.error("Error loading active_clients:",e)}Zn()}var cs=U('<button class="ml-2 px-2 py-1 text-xs bg-blue-500 hover:bg-blue-600 text-white rounded transition-colors duration-200">Reconnect</button>'),ds=()=>{const e=document.documentElement.classList.toggle("dark");localStorage.setItem("theme",e?"dark":"light")},fs=U('<div class="fixed inset-0 bg-white dark:bg-gray-900 flex items-center justify-center z-50 transition-opacity duration-500"><div class="text-center flex flex-col gap-4 items-center justify-center"><!> <p class="text-gray-600 dark:text-gray-300">Loading chats...</p></div></div>'),vs=U('<div class="container mx-auto p-4 lg:p-6"><div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 mb-6"><div class="flex flex-col sm:flex-row justify-between items-center gap-4"><div class="flex items-center gap-3"><div class="bg-blue-500 p-2 rounded-lg"><!></div> <div><h1 class="text-2xl font-bold text-gray-800 dark:text-gray-100">Clients - AP 24/25</h1> <p class="text-sm text-gray-500 dark:text-gray-400">Clients UI for Advanced Programming Project</p></div></div> <div class="flex items-center gap-6"><div class="flex items-center gap-2"><div class="relative"><div></div> <div></div></div> <span class="text-sm text-gray-600 dark:text-gray-300"> </span> <!></div> <div class="h-8 w-px bg-gray-200 dark:bg-gray-700"></div> <div class="flex items-center gap-3"><!> <button id="theme-toggle" aria-label="Change theme" class="relative inline-flex h-6 w-11 items-center rounded-full bg-gray-200 dark:bg-gray-700 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800"><span class="inline-block h-5 w-5 transform rounded-full bg-white shadow-lg transition-transform duration-200 translate-x-[2px] dark:translate-x-5"></span></button> <!></div></div></div></div> <div id="chat-grid" class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"></div></div> <!>',1);function gs(e,t){me(t,!0);const r=Mt(),n=()=>ne(Or,"$displayedChats",r),i=()=>ne(mt,"$registrationStatus",r),a=()=>ne(Yr,"$connectionStatus",r);let o=K(!0);kt(async()=>{await us(),setTimeout(()=>{w(o,!1)},800),window.addEventListener("beforeunload",s)}),Ia(()=>{window.removeEventListener("beforeunload",s),u()});function s(E){u()}function u(){console.error("Unregistering clients..."),n().forEach(E=>{const C=i()[E];C!==void 0&&C>=0&&fetch("/api/unregister",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:E,server_id:C})})}),console.warn("Clients unregistered.")}var l=vs(),c=G(l),d=b(c),v=b(d),g=b(v),f=b(g),_=b(f);Oa(_,{class:"size-5 text-white"});var k=R(g,2),T=b(k),m=b(T),y=b(m),S=R(y,2),p=R(m,2),x=b(p),D=R(p,2);{var I=E=>{var C=cs();C.__click=function(...M){br==null||br.apply(this,M)},O(E,C)};W(D,E=>{a()||E(I)})}var P=R(T,4),j=b(P);ja(j,{class:"size-5 dark:text-gray-200"});var Y=R(j,2);Y.__click=[ds];var q=R(Y,2);Da(q,{class:"size-5 dark:text-gray-200"});var X=R(d,2);wt(X,5,n,xt,(E,C)=>{ss(E,{get clientId(){return h(C)}})});var ee=R(c,2);{var z=E=>{var C=fs(),M=b(C),ce=b(M);_t(ce,{class:"w-16 h-16 text-blue-500 animate-spin mb-4"}),O(E,C)};W(ee,E=>{h(o)&&E(z)})}$(()=>{Z(y,`w-3 h-3 rounded-full transition-colors duration-200 ${(a()?"bg-green-500":"bg-red-500")??""}`),Z(S,`w-3 h-3 absolute inset-0 rounded-full transition-colors duration-200 ${(a()?"bg-green-500 animate-ping":"bg-red-500")??""}`),ie(x,a()?"Online":"Offline")}),O(e,l),pe()}Ce(["click"]);ca(gs,{target:document.getElementById("app")});
